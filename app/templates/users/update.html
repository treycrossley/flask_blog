
{% extends 'base.html' %}

{% block content %}
    
{% if id == current_user.id or current_user.is_admin %}
  
    <h1> Update User</h1>
    <br/>
    <div class="shadow p-3 mb-5 bg-body-tertiary rounded">
    <form action="{{url_for('users.update',user_id=id)}}" method="POST" enctype="multipart/form-data">
        {{form.hidden_tag() }}
        {{form.name.label(class="form-label")}}
        {% if form.name.errors %}
            {% for err in form.name.errors %}
                <span class="text-danger font-italic">{{err}}</span>
            {%endfor%}
        {% endif %}
        {{form.name(class="form-control", value=name_to_update.name)}}
        <br>
        {{form.username.label(class="form-label")}}
        {% if form.username.errors %}
            {% for err in form.username.errors %}
                <span class="text-danger font-italic">{{err}}</span>
            {%endfor%}
        {% endif %}
        {{form.username(class="form-control", value=name_to_update.username)}}
        <br>
        {{form.email.label(class="form-label")}}
        {% if form.email.errors %}
            {% for err in form.email.errors %}
                <span class="text-danger font-italic">{{err}}</span>
            {%endfor%}
        {% endif %}
        {{form.email(class="form-control", value=name_to_update.email)}}
        <br>
         {{form.favorite_pizza_place.label(class="form-label")}}
         {% if form.favorite_pizza_place.errors %}
            {% for err in form.favorite_pizza_place.errors %}
                <span class="text-danger font-italic">{{err}}</span>
            {%endfor%}
        {% endif %}
        {{form.favorite_pizza_place(class="form-control", value=name_to_update.favorite_pizza_place)}}
    </br>
     {{form.profile_pic.label(class="form-label")}}
     {% if form.profile_pic.errors %}
            {% for err in form.profile_pic.errors %}
                <span class="text-danger font-italic">{{err}}</span>
            {%endfor%}
        {% endif %}
      {{form.profile_pic(class="form-control", value=name_to_update.profile_pic)}}
        <br>


<br><br>
    {{form.submit(class="btn btn-secondary")}}
    
    <a class="btn btn-danger" href="{{url_for('users.delete',user_id=id)}}">Delete</a>

    </form>
    </div>
    {% else %}
          <div class="alert alert-success alert-dismissible fade show" role="alert">
        Sorry you can't access this user's account
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <h2> Access Denied!</h2>
    {% endif %}
{% endblock %}

